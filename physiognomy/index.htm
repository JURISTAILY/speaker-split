<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="lib/jquery-3.1.1.min.js"></script>
	<link rel="stylesheet" href="lib/bootstrap-3.3.7-dist/css/bootstrap.min.css">
	<script src="lib/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	<script src="lib/d3.min.js"></script>
	<script src="lib/d3.parcoords.js"></script>
	<link rel="stylesheet" type="text/css" href="lib/d3.parcoords.css">
	<link rel="stylesheet" href="css.css">
	<link rel="stylesheet" href="dialogue-details.css">
	<title></title>
	<style type="text/css">
    .label {
    	font-size:10pt;
    }
	</style>
</head>
<body>
	<nav>
		<a href="#">Сводный отчет</a>
		<a href="#">Анализ KPI операторов</a>
		<a href="#">Лояльность клиентов</a>
		<a href="#">Речевая аналитика</a>
		<a href="#">Реферальная программа</a>
		<a href="#">Поддержка</a>
		<a href="#">Биллинг</a>
		<a href="#">Настройки</a>
	</nav>
	<main>
		<div>
		Иллюстрационный элемент называется "параллельные координаты". Не стал пока разбираться с наложением подписей на осях и с изменением размера в целом (это не так просто). Просто показал базовую функциональность. Каждая линия описывает одного оператора. На первом графике показано, как это может смотреться при небольшом (9) количестве операторов, на втором - при 1000 операторов. На каждой из осей можно выделить фильтрующее окно, выделяя из общей массы интересующих операторов. Можно менять порядок осей просто перетаскивая их. Посмотреть, как может выглядеть законченный инструмент на основе параллельных координат можно <a href="http://bl.ocks.org/syntagmatic/3150059">тут</a>. Завтра дорисую то, как я вижу гистограммы. 
			<div id="parcord" class="parcoords"></div>
		</div>

		<div>
		тут таблицей оберну...
			<div class="dialogue-details container-fluid">
				<div class="row">
					<div class="col-xs-60">
						<h3>Основные проблемы разговора</h3>
						<div class = "dialogue-info">
							<table>
								<tbody>
									<tr class="dialogue-info-group">
										<td colspan="2"><img src="img/close.png" alt="show" />Количественно-временные параметры</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="8" aria-valuemin="0" aria-valuemax="10" style="width:80%"></div>
											</div>
										</td>
										<td>8 баллов</td>
									</tr>
									<tr>
										<td>Речь оператора</td>
										<td>70%</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="10" style="width:20%"></div>
											</div>
										</td>
										<td>2 балла</td>
									</tr>
									<tr>
										<td>Речь клиента</td><!--завичимые параметры может как-то отметить. Строго говоря речь клиента оценивать не имеет смысла-->
										<td>30%</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="10" style="width:40%"></div>
											</div>
										</td>
										<td>4 балла</td>
									</tr>
									<tr>
										<td>Речь оператора</td>
										<td>00:24</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="6" aria-valuemin="0" aria-valuemax="10" style="width:60%"></div>
											</div>
										</td>
										<td>6 баллов</td>
									</tr>
									<tr>
										<td>Количество переводов</td>
										<td>15 шт</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="10" style="width:100%"></div>
											</div>
										</td>
										<td>10 баллов</td>
									</tr>
									<tr>
										<td>Количество удержаний</td>
										<td>2 шт</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" style="width:00%"></div>
											</div>
										</td>
										<td>0 баллов</td>
									</tr>
									<tr>
										<td>Макс. время удержания</td>
										<td>00:59</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="7" aria-valuemin="0" aria-valuemax="10" style="width:70%"></div>
											</div>
										</td>
										<td>7 баллов</td>
									</tr>
									<tr>
										<td>Общее время удержаний</td>
										<td>20:02</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="8" aria-valuemin="0" aria-valuemax="10" style="width:80%"></div>
											</div>
										</td>
										<td>8 баллов</td>
									</tr>
									<tr class="dialogue-info-group">
										<td colspan="2"><img src="img/open.png" alt="show" />Параметры речевой активности</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="10" style="width:10%"></div>
											</div>
										</td>
										<td>1 балл</td>
									</tr>
									<tr class="dialogue-info-group">
										<td colspan="2"><img src="img/open.png" alt="show" />Лексико-семантический анализ</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="9" aria-valuemin="0" aria-valuemax="10" style="width:90%"></div>
											</div>
										</td>
										<td>9 баллов</td>
									</tr>
									<tr class="dialogue-info-group">
										<td colspan="2"><img src="img/open.png" alt="show" />Эмоциональное состояние</td>
										<td>
											<div class="progress dialogue-info-progress">
												<div class="progress-bar" role="progressbar" aria-valuenow="8" aria-valuemin="0" aria-valuemax="10" style="width:80%"></div>
											</div>
										</td>
										<td>8 баллов</td>
									</tr>
								</tbody>
							</table>
							<script type="text/javascript">
								var progressScale = d3.scale.linear().range(["#cc3032", "#fdca7d","#63be7b"]).domain([0,50,100]);
								d3.selectAll(".progress-bar").style("background-color", function() { return progressScale(this.style.width.slice(0,-1)); });
							</script>
						</div>
					</div>
					<div class="col-xs-60">
						<h3>Запись звонка</h3>
						<div style="height:165px;"> 
						<audio controls preload>
							<source src="#">
						</audio>
						</div>
						<h3>Расшифровка диалога</h3>
						<div class="dialogue-script">
							<table>
								<tbody>
									<tr>
										<td class="dialogue-script-op">Оператор:</td>
										<td>Здравствуйте! вы насчет работы торговым представителем?</td>
									</tr>
									<tr>
										<td class="dialogue-script-cl">Клиент:</td>
										<td>Да, вот моё резюме.</td>
									</tr>
									<tr>
										<td class="dialogue-script-op">Оператор:</td>
										<td>В нашей компании ассортимент товаров, с которыми вам придется работать, будет намного шире. Это кондитерские изделия: торты, пирожные, рулетики, конфеты. На какую зарплату вы рассчитываете?</td>
									</tr>
									<tr>
										<td class="dialogue-script-cl">Клиент:</td>
										<td>На пятьсот долларов, как указано в вашем объявлении. Еще я рассчитываю, что если буду хорошо справляться со своими обязанностями, моя зарплата вырастет.</td>
									</tr>
									<tr>
										<td class="dialogue-script-op">Оператор:</td>
										<td>Наша компания всегда поощряет сотрудников за успехи в труде. Скажите, почему вы выбрали для работы именно нашу компанию?</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>
<script>
var data = [ ];

for (var i = 0; i < 9; ++i) {
	data.push({
		"Имя оператора": ["Зарина", "Джамиля", "Гюзель", "Саида", "Хафиза", "Зухра", "Лейла", "Зульфия", "Гюльчатай"][i],
		"% молчания" : Math.min(100 * Math.random(), 1 / Math.random() / Math.random()),
		"Среднее время разговора (мин)":(Math.random() + Math.random() + Math.random()), 
		"% клиентов, совершивших покупку" : Math.min(100 * Math.random(), 1 / Math.random() / Math.random()), 
		"Оценка разговора" : 1 - Math.random() * Math.random() * Math.random() * Math.random(), 
		"Нецензурных слов в минуту" : Math.random() * Math.random() * Math.random() * Math.random()
	});
}


 d3.select("#parcord")
   .style("height","500px")
   .on('resize',function(){
  	console.log(d3.select(this).style("width"));
  	pc2.width(d3.select(this).style("width"));
  });;
var pc = d3.parcoords()("#parcord")
  .data(data)
  .createAxes()
  .reorderable()
  .interactive()
  .mode("queue")
  .composite("darken")
  .color(function(d) { return colorgen(d["id оператора"]); })
  .brushMode("1D-axes")
  .render();

var colorgen = d3.scale.linear()
			.range(["steelblue", "brown", "#b15928"]).domain([0, 999]);
</script>
</body>
</html>