<h3>Основные проблемы разговора</h3>
<div class = "dialogue-info">
  <table>
    <tbody>
      <template ngFor let-detail [ngForOf]="details">
        <tr class="dialogue-info-group">
          <td colspan="2"><img src="assets/img/{{ (!open[detail.title] ? 'open' : 'close') }}.png" alt="show" (click)="open[detail.title] = !open[detail.title]" />{{ detail.title }}</td>
          <td>
            <div class="progress dialogue-info-progress">
              <div [style.background-color]="detail.grade | gradeToColor" class="progress-bar" role="progressbar" [attr.aria-valuenow]="detail.grade" aria-valuemin="0" aria-valuemax="10" [style.width.%]="detail.grade | gradeToPercent"></div>
            </div>
          </td>
          <td style="width:140px;">{{ gradeValueAndUnit(detail.grade) }}</td>
        </tr>
        <template ngFor let-item [ngForOf]="detail.children">
          <tr *ngIf="open[detail.title]">
            <td>{{ item.title }}</td>
            <td>{{ item.value }}</td>
            <td>
              <div class="progress dialogue-info-progress">
                <div [style.background-color]="item.grade | gradeToColor" class="progress-bar" role="progressbar" [attr.aria-valuenow]="item.grade" aria-valuemin="0" aria-valuemax="10" [style.width.%]="item.grade | gradeToPercent"></div>
              </div>
            </td>
            <td>{{ gradeValueAndUnit(item.grade) }}</td>
          </tr>
        </template>
      </template>
    </tbody>
  </table>
</div>
